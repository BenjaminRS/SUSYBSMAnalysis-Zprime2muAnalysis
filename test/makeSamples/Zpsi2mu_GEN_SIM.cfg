# Configuration file for production of Z'-->mu+ mu-.
# Zprime2mu part is translation to CMSSW language of control cards used
# in PYTHIA and CMKIN since 2002; the rest is standard.

process GENSIM = {

    untracked PSet maxEvents = {untracked int32 input = 1000}

    untracked PSet configurationMetadata = {
	untracked string version = "$Revision: 1.1 $"
	untracked string name = "$Source: /cvs_server/repositories/CMSSW/CMSSW/SUSYBSMAnalysis/Zprime2muAnalysis/test/Zpsi2mu_GEN_SIM.cfg,v $"
	untracked string annotation = "SV: Zpsi (1 TeV) --> mu+ mu-"
    }

    # Initialize MessageLogger
    include "FWCore/MessageService/data/MessageLogger.cfi"
    # replace MessageLogger.cerr.default.limit = 10

    # Initialize random number seeds
    include "Configuration/ReleaseValidation/data/Services.cff"

    untracked PSet options = {
	include "FWCore/Framework/test/cmsExceptionsFatalOption.cff"
	untracked bool wantSummary = true
	untracked bool makeTriggerResults = true
    }

    # Event generation
    source = PythiaSource { 
# to printout pythia event record (call pylist)
	untracked int32 pythiaPylistVerbosity = 0
# to printout HepMC::GenEvent record (HepMC::GenEvent::print())
	untracked bool pythiaHepMCVerbosity = false
	untracked int32 maxEventsToPrint = 0

	PSet PythiaParameters = {

	    # This is a vector of ParameterSet names to be read, in this order
	    vstring parameterSets = {
		"pythiaUESettings",
		"Zprime2mu"
	    }

	    include "Configuration/Generator/data/PythiaUESettings.cfi"

	    vstring Zprime2mu = {
		"MSEL = 21            ! generate Zprime according to ISUB=141",
# Treatment of Z'0/Z0/gamma interference
#	        "MSTP(44) = 2         ! only Z0 included",
	        "MSTP(44) = 3         ! only Zprime included",
#	        "MSTP(44) = 4         ! only Z0/gamma interference included",
#	        "MSTP(44) = 7         ! complete Zprime/Z/gamma interference",
# Z' mass
	        "PMAS(32,1) = 2000.0  ! PMAS(KC,1) is mass of particle KC",
# Range of allowed M values
#		"CKIN(1) =  200.      ! lower mass limit",
#		"CKIN(1) =  400.      ! ",
	        "CKIN(1) = 1000.      ! ",
#	        "CKIN(1) = 1500.      ! ",
#	        "CKIN(1) = 2000.      ! ",
#	        "CKIN(1) = 3000.      ! ",
#	        "CKIN(2) =  500.      ! upper mass limit",
# Couplings: first generation
		"PARU(121)=  0.        ! vd",
		"PARU(122)= -0.506809  ! ad",
		"PARU(123)=  0.        ! vu",
		"PARU(124)= -0.506809  ! au",
		"PARU(125)=  0.        ! ve",
		"PARU(126)= -0.506809  ! ae",
		"PARU(127)= -0.253405  ! vnu",
		"PARU(128)= -0.253405  ! anu",
# Couplings: second generation
		"PARJ(180)=  0.        ! vd",
		"PARJ(181)= -0.506809  ! ad",
		"PARJ(182)=  0.        ! vu",
		"PARJ(183)= -0.506809  ! au",
		"PARJ(184)=  0.        ! ve",
		"PARJ(185)= -0.506809  ! ae",
		"PARJ(186)= -0.253405  ! vnu",
		"PARJ(187)= -0.253405  ! anu",
# Couplings: third generation
		"PARJ(188)=  0.        ! vd",
		"PARJ(189)= -0.506809  ! ad",
		"PARJ(190)=  0.        ! vu",
		"PARJ(191)= -0.506809  ! au",
		"PARJ(192)=  0.        ! ve",
		"PARJ(193)= -0.506809  ! ae",
		"PARJ(194)= -0.253405  ! vnu",
		"PARJ(195)= -0.253405  ! anu",
# Decay modes
		"MDME(289,1) = 0      ! d + dbar",
		"MDME(290,1) = 0      ! u + ubar",
		"MDME(291,1) = 0      ! s + sbar",
		"MDME(292,1) = 0      ! c + cbar",
		"MDME(293,1) = 0      ! b + bbar",
		"MDME(294,1) = 0      ! t + tbar",
		"MDME(295,1) =-1      ! 4th generation q + qbar",
		"MDME(296,1) =-1      ! 4th generation q + qbar",
		"MDME(297,1) = 0      ! e-     + e+",
		"MDME(298,1) = 0      ! nu_e   + nu_ebar",
		"MDME(299,1) = 1      ! mu-    + mu+",
		"MDME(300,1) = 0      ! nu_mu  + nu_mubar",
		"MDME(301,1) = 0      ! tau-   + tau+",
		"MDME(302,1) = 0      ! nu_tau + nu_taubar",
		"MDME(303,1) =-1      ! 4th generation l- + l+",
		"MDME(304,1) =-1      ! 4th generation nu + nubar",
		"MDME(305,1) =-1      ! W+ + W-",
		"MDME(306,1) =-1      ! H+ + H-",
		"MDME(307,1) =-1      ! Z0 + gamma",
		"MDME(308,1) =-1      ! Z0 + h0",
		"MDME(309,1) =-1      ! h0 + A0",
		"MDME(310,1) =-1      ! H0 + A0"
	    }
	}
    }

    # Simulation parameters
    include "Configuration/StandardSequences/data/Simulation.cff"
    include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"

    # Produces genParticleCandidates from HepMC products
    include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
    #include "PhysicsTools/HepMCCandAlgos/data/genParticleCandidates.cfi"

    # Produces the same output as PYLIST.  Works on GenParticlesCandidates.
    module printTree = ParticleListDrawer {
	untracked int32 maxEventsToPrint = 10
    }

    # Event output
    include "Configuration/EventContent/data/EventContent.cff"
    module GEN-SIM = PoolOutputModule {
     	using FEVTSIMEventContent
	untracked string fileName = "file:Zpsi2000_GEN.root"
#	untracked string fileName = "file:Zpsi1000_fm_GEN_SIM.root"
	untracked PSet datasets = {
	    untracked PSet dataset1 = {
		untracked string dataTier = "GEN"
	    }
	    untracked PSet dataset2 = {
		untracked string dataTier = "SIM"
	    }
	}
    }

    # path p = {psim, genParticleCandidates, printTree}
    endpath outpath = {GEN-SIM}
}
